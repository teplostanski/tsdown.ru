# Цель (Target)

Параметр `target` определяет, какие возможности JavaScript и CSS будут понижены (преобразованы в более старый синтаксис), а какие останутся без изменений в итоговом коде. Это позволяет контролировать совместимость собранного кода с определёнными окружениями или версиями JavaScript.

Например:

- Стрелочная функция `() => this` будет преобразована в эквивалентное выражение `function`, если target установлен в `es5` или ниже.
- CSS-селектор с вложенностью `&` будет "развёрнут" (flattened), если target — `chrome108` или ниже.

> [!WARNING] Поддерживается только преобразование современного синтаксиса в более старый (syntax downgrade)
> Опция `target` влияет только на преобразование синтаксиса. Она не добавляет полифиллы или прослойки для API, которые могут отсутствовать в целевой среде. Например, если в вашем коде используется `Promise`, поддержка этого API не будет добавлена автоматически для окружений, где `Promise` не реализован. В таких случаях полифиллы необходимо подключать вручную.

### Настройка Target

Вы можете указать целевую платформу с помощью опции `--target`:

```bash
tsdown --target <цель>
```

### Поддерживаемые значения

`tsdown` поддерживает широкий спектр целей, включая:

- **Версии ECMAScript:** `es5`, `es2015`, `es2020`, `esnext` и др.
- **Браузеры:** `chrome100`, `safari18`, `firefox110` и др.
- **Node.js:** `node20.18`, `node16` и др.

### Пример

```bash
tsdown --target es2020
```

Можно также передать **массив целей**, чтобы обеспечить совместимость сразу с несколькими средами. Например:

```bash
tsdown --target chrome100 --target node20.18
```

### Вспомогательные модули (runtime helpers)

При преобразовании некоторых современных возможностей JavaScript, `tsdown` может потребовать вспомогательные функции из пакета `@oxc-project/runtime`. Например:

- Преобразование выражений `await` в старый синтаксис требует helper-функции `@oxc-project/runtime/helpers/asyncToGenerator`.

Если ваш target включает такие возможности, возможно, потребуется установить пакет `@oxc-project/runtime` в проект:

```bash
npm install @oxc-project/runtime
```
